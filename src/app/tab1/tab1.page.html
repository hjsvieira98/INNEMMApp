<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
    Ocorrencias
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="has-" [fullscreen]="true">

  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Ocorrencias</ion-title>
    </ion-toolbar>
  </ion-header>
  <!-- List of Sliding Items -->
  <ion-segment (ionChange)="segmentChanged($event)" value="{{selectedTab}}">
    <ion-segment-button value="1">
      <ion-label>Aceites</ion-label>
    </ion-segment-button>
    <ion-segment-button value="0">
      <ion-label>Pendentes</ion-label>
    </ion-segment-button>
    <ion-segment-button value="2">
      <ion-label>Recusadas</ion-label>
    </ion-segment-button>
  </ion-segment>
  <br/>
    <div *ngIf="occurrence" (click)="viewOccurrence(occurrence)" class="divOccurrence">
      <ion-grid  style="padding: 0; vertical-align: center">
        <ion-row>
          <ion-col size="9">
            <b style="font-size: 13px">OcorrÃªncia Ativa</b>
            <p class="text" style="font-size: 20px;font-weight: bold">
              {{occurrence.title}}

            </p>
          </ion-col>
          <ion-col style="text-align: center;" size="3">
            <ion-icon style="font-size: 40px;text-align: center;
  margin-top: 10px;" name="arrow-forward-sharp"></ion-icon>
          </ion-col>
        </ion-row>

      </ion-grid>
    </div>
<ion-card *ngIf="ocurrences">
<ion-list style="height: 80%">
  <ion-item-sliding *ngFor=" let ocurrence of ocurrences ">
      <ion-item-options *ngIf="selectedTab == 0" side="start">
        <ion-item-option (click)="rejectOccurrence(ocurrence)" class="listCustomOptions" color="danger" expandable>
          Recusar
        </ion-item-option>
      </ion-item-options>
      <ion-item (click)="viewOccurrence(ocurrence)" style="border-left: #4c8dff 5px solid;" *ngIf="!ocurrence.pivot.opened" class="listCustom">
        <ion-grid  style="padding: 0; vertical-align: center">
           <ion-row>
             <ion-col size="9">
               <b style="font-size: 20px">{{ocurrence.title}}</b>
               <p class="text" style="font-size: 13px">
                 {{ocurrence.description}}

               </p>
             </ion-col>
              <ion-col size="3" style="text-align: center;">
              <b class="textcenter"> {{ocurrence.created_at  | date: 'dd/MM/yyyy'}}</b>
                <br>
                <img *ngIf="ocurrence.urgency_id == 3" src="assets/images/sirene_normal.png">
                <img *ngIf="ocurrence.urgency_id == 2" src="assets/images/sirene_warraing.png">
                <img *ngIf="ocurrence.urgency_id == 1" src="assets/images/sirene_danger.png">
              </ion-col>
           </ion-row>

          </ion-grid>
      </ion-item>
      <ion-item (click)="viewOccurrence(ocurrence)" style="border-left: #ffffff 5px solid;" *ngIf="ocurrence.pivot.opened" class="listCustom">
      <ion-grid  style="padding: 0; vertical-align: center">
        <ion-row>
          <ion-col size="9">
            <b style="font-size: 20px">{{ocurrence.title}}</b>
            <p class="text" style="font-size: 13px">
              {{ocurrence.description}}

            </p>
          </ion-col>
          <ion-col size="3" style="text-align: center;">
            <b class="textcenter"> {{ocurrence.created_at  | date: 'dd/MM/yyyy'}}</b>
            <br>
            <img *ngIf="ocurrence.urgency_id == 3" src="assets/images/sirene_normal.png">
            <img *ngIf="ocurrence.urgency_id == 2" src="assets/images/sirene_warraing.png">
            <img *ngIf="ocurrence.urgency_id == 1" src="assets/images/sirene_danger.png">

          </ion-col>
        </ion-row>

      </ion-grid>
    </ion-item>
      <ion-item-options *ngIf="selectedTab == 0"  side="end">
        <ion-item-option (click)="acceptOccurrence(ocurrence)" class="listCustomOptions" color="tertiary" expandable>
          Aceitar
        </ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>

</ion-card>
  <ion-card *ngIf="!ocurrences" >
    <div >

      <ion-list>
        <ion-item>
          <ion-thumbnail slot="end">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
          <ion-label>
            <h3>
              <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
            </h3>
            <p>
              <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </p>
            <p>
              <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
            </p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-thumbnail slot="end">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
          <ion-label>
            <h3>
              <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
            </h3>
            <p>
              <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </p>
            <p>
              <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
            </p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-thumbnail slot="end">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
          <ion-label>
            <h3>
              <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
            </h3>
            <p>
              <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </p>
            <p>
              <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
            </p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-thumbnail slot="end">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
          <ion-label>
            <h3>
              <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
            </h3>
            <p>
              <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </p>
            <p>
              <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
            </p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-thumbnail slot="end">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
          <ion-label>
            <h3>
              <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
            </h3>
            <p>
              <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </p>
            <p>
              <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
            </p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-thumbnail slot="end">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
          <ion-label>
            <h3>
              <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
            </h3>
            <p>
              <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </p>
            <p>
              <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
            </p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-thumbnail slot="end">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
          <ion-label>
            <h3>
              <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
            </h3>
            <p>
              <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </p>
            <p>
              <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
            </p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-thumbnail slot="end">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
          <ion-label>
            <h3>
              <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
            </h3>
            <p>
              <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </p>
            <p>
              <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
            </p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-thumbnail slot="end">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
          <ion-label>
            <h3>
              <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
            </h3>
            <p>
              <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </p>
            <p>
              <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
            </p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-thumbnail slot="end">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
          <ion-label>
            <h3>
              <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
            </h3>
            <p>
              <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </p>
            <p>
              <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
            </p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-thumbnail slot="end">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
          <ion-label>
            <h3>
              <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
            </h3>
            <p>
              <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </p>
            <p>
              <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
            </p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-thumbnail slot="end">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-thumbnail>
          <ion-label>
            <h3>
              <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
            </h3>
            <p>
              <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
            </p>
            <p>
              <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>
            </p>
          </ion-label>
        </ion-item>
      </ion-list>
    </div>
  </ion-card>

</ion-content>
